<table id="user-submitted">
  <thead>
    <tr>
      <th></th>
      <th>Status</th>
      <th>Submitted</th>
      <th>Content</th>
      <th>Credit</th>
      <% unless @collection %>
        <th>Collection</th>
      <% end %>
      <th>Note</th>
    </tr>
  </thead>

  <tbody>
    <% contents.each do |content| %>
      <tr>
        <td>
          <%= link_to '<i class="fa fa-eye"></i>'.html_safe, user_submitted_collection_content_path(content.collection, content) %>
          <%= link_to '<i class="fa fa-pencil"></i>'.html_safe, edit_user_submitted_collection_content_path(content.collection, content) %>
          <%= link_to '<i class="fa fa-trash-o"></i>'.html_safe, user_submitted_collection_content_path(content.collection, content), method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
        <td>
          <div class="status-block">
            <span class="current-status" style="color:<%= content.get_color %>;">
              <%= content.get_icon %>&nbsp;<%= content.status.capitalize %>
            </span>
            <% if content.status == "pending" %>
              <div class="change-status">
                <div class="status-buttons">
                  <span class="status-btn approve">Approve</span><span class="status-btn reject">Reject</span>
                </div>
                <div class="status-note">
                  <input id="note"></input>
                </div>
              </div>
            <% end %>
          </div>
        </td>
        <td>
          <%= content.created_at.strftime("%l:%M%P, %B %e") %>
        </td>
        <td>
          <%= render partial: "user_submitted/contents/display", locals: { content: content, size: 100 } %>
        </td>
        <td><%= content.credit.truncate(35) %></td>
        <% unless @collection %>
          <td><%= link_to content.collection.name, user_submitted_collection_path(content.collection) %></td>
        <% end %>
        <td>
          <%= content.note %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<style>
.status-block{
  padding: 5px;
}
.change-status{
  display: none;
  border: solid black 1px;
  border-radius: 5px;
}
.status-block:hover .change-status{
  position: absolute;
  display: block;
  padding: 5px;
  z-index: 42;
  background-color: #999;
}
.status-buttons {
  display: flex;
  justify-content: space-between;
  margin-bottom: .25rem;
}
.status-btn {
  padding: .15rem;
}
.current-status {
}

</style>
